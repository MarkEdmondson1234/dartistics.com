<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Mark Edmondson" />

<meta name="date" content="2016-09-26" />

<title>Adobe Analytics - R Connector</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/htmlwidgets-0.7/htmlwidgets.js"></script>
<link href="site_libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="site_libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="site_libs/moment-2.8.4/moment.js"></script>
<script src="site_libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="site_libs/dygraphs-binding-1.1.1.3/dygraphs.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/default.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.9em;
  padding-left: 5px;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DARTISTICS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Overview
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="example1.html">Example: Trending</a>
    </li>
    <li>
      <a href="example2.html">Example: Data Explorer</a>
    </li>
    <li>
      <a href="example3.html">Example: Venn Diagram</a>
    </li>
    <li>
      <a href="example4.html">Example: GA Effect</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    The Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="whatisr.html">What Is R?</a>
    </li>
    <li>
      <a href="rstudio.html">RStudio</a>
    </li>
    <li>
      <a href="packages.html">Packages</a>
    </li>
    <li>
      <a href="basics-base_r.html">Basics of Base R</a>
    </li>
    <li>
      <a href="exercise1-thebasics.html">Exercise: The Basic Basics</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    I/O
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">WORKING WITH FILES</li>
    <li>
      <a href="import-csv-excel.html">CSV import</a>
    </li>
    <li>
      <a href="excel.html">Microsoft Excel(!)</a>
    </li>
    <li>
      <a href="exercise2-io.html">Exercise: I/O</a>
    </li>
    <li class="dropdown-header">WORKING WITH APIs</li>
    <li>
      <a href="api-google-analytics.html">Google Analytics</a>
    </li>
    <li>
      <a href="api-adobe-analytics.html">Adobe Analytics</a>
    </li>
    <li>
      <a href="api-other.html">Other APIs</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data Structures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R CLASSES AND SYNTAX</li>
    <li>
      <a href="classes.html">R Classes</a>
    </li>
    <li>
      <a href="accessing.html">Accessing elements</a>
    </li>
    <li>
      <a href="exercise3-accessing-data.html">Exercise: Accessing Data</a>
    </li>
    <li class="dropdown-header">BASE R vs. TIDY</li>
    <li>
      <a href="tidyverse.html">Tidy data / Tidyverse</a>
    </li>
    <li>
      <a href="dplyr.html">dplyr()</a>
    </li>
    <li>
      <a href="exercise4-tidy-dplyr.html">Exercise: Tidy Data / dplyr</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modelling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="modelling-intro.html">Introduction</a>
    </li>
    <li>
      <a href="correlation.html">Correlation</a>
    </li>
    <li>
      <a href="regression.html">Regression</a>
    </li>
    <li>
      <a href="timeseries.html">Time-series</a>
    </li>
    <li>
      <a href="categorisation.html">Categorisation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Output
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="viz-options.html">Visualisation Options</a>
    </li>
    <li>
      <a href="base-plots.html">Base Plots</a>
    </li>
    <li>
      <a href="ggplot2.html">ggplot2()</a>
    </li>
    <li>
      <a href="htmlwidgets.html">htmlwidgets()</a>
    </li>
    <li>
      <a href="rmarkdown-shiny.html">RMarkdown + Shiny</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="resources.html">Useful Links</a>
    </li>
    <li>
      <a href="key-topics.html">Key topics</a>
    </li>
    <li>
      <a href="github.html">GitHub</a>
    </li>
    <li>
      <a href="habits.html">Good Habits</a>
    </li>
    <li>
      <a href="going-further.html">Going further</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-N4DF7T"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N4DF7T');</script>
<!-- End Google Tag Manager -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Adobe Analytics - R Connector</h1>
<h4 class="author"><em>Mark Edmondson</em></h4>
<h4 class="date"><em>26 September 2016</em></h4>

</div>


<div id="initial-setup" class="section level1">
<h1>Initial Setup</h1>
<p>First download and install <a href="https://cran.r-project.org/mirrors.html">R</a> from CRAN and <a href="https://www.rstudio.com/">RStudio</a></p>
<ul>
<li>CRAN is the organisation that maintains and distributes R</li>
<li>R is the programming language itself</li>
<li>RStudio is a program that makes using R a lot easier</li>
</ul>
</div>
<div id="installation" class="section level1">
<h1>Installation</h1>
<pre class="r"><code>## This installs a package for downloading Adobe Analytics data
install.packages(&quot;RSiteCatalyst&quot;)</code></pre>
<p>Check out the resources made by its creator, <a href="http://randyzwitch.com/rsitecatalyst/">Randy Zwitch</a></p>
<div id="recording-secret-keys" class="section level2">
<h2>Recording secret keys</h2>
<p>I save these values to a <code>.Renviron</code> file in my home directory to keep them safe and call them via the the R command <code>Sys.envir</code>.</p>
<p>This keeps them out of your working folder that may be shared and compromise your security.</p>
<div id="example-.renviron-file" class="section level3">
<h3>Example .Renviron file</h3>
<p>This is in my root directory: <code>~/.Renviron</code></p>
<pre><code>ADOBE_KEY=&quot;a7xxxxx639-iih-nordic-r&quot;
ADOBE_SECRET=&quot;2eadxxxxx1495ea49&quot;
ADOBE_KEY_OLD=&quot;mark:XXXX&quot;
ADOBE_SECRET_OLD=&quot;74b46625xxxxx7e89dbe6e0&quot;</code></pre>
</div>
</div>
</div>
<div id="authentication-new" class="section level1">
<h1>Authentication (New)</h1>
<p>This is the new OAuth2 method of authentication.</p>
<p>Use this one if you can, but at time of writing MobileLife does not have this activated for its account.</p>
<p>Link your Adobe Analytics login to the Adobe ID account to use this method of signin.</p>
<div id="create-application" class="section level2">
<h2>Create Application</h2>
<p>If you have no application for your Adobe Analytics account, here is how to make one:</p>
<ol style="list-style-type: decimal">
<li>Create an app by visiting developer console and navigating to <a href="https://marketing.adobe.com/developer/applications">Developer &gt; Applications</a></li>
<li>Select “Web Server (Authorization Code)”</li>
<li>Name the application</li>
<li>Leave the Redirect Uri field blank.</li>
</ol>
<div class="figure">
<img src="setting-up-adobe-application.png" alt="setting-up-application" />
<p class="caption">setting-up-application</p>
</div>
<p>You should then see this screen to grant permission after running <code>SCAuth</code></p>
<div class="figure">
<img src="adobe-app-oauth-permission.png" alt="adobe permission" />
<p class="caption">adobe permission</p>
</div>
<p>Authentication is done via the below.</p>
<p>The <code>SCAuth()</code> function will open your browser or read the existing <code>auth-adobe</code> file.</p>
<pre class="r"><code>library(RSiteCatalyst)

## New OAuth method
key    &lt;- Sys.getenv(&quot;ADOBE_KEY&quot;)
secret &lt;- Sys.getenv(&quot;ADOBE_SECRET&quot;)

SCAuth(key, secret, 
       company = &quot;XXXXX&quot;, 
       token.file = &quot;auth-adobe&quot;, 
       auth.method = &quot;OAUTH2&quot;)</code></pre>
</div>
</div>
<div id="authentication-old" class="section level1">
<h1>Authentication (Old)</h1>
<p>This is the deprecated method and will dissappear ‘soon’.</p>
<p>Get the Web Service key under the Adobe Analytics Account Information page.</p>
<ul>
<li>User Name is used as the key</li>
<li>Shared Secret is used as the secret</li>
</ul>
<div class="figure">
<img src="legacy-authentication-adobe.png" alt="legacy webservice" />
<p class="caption">legacy webservice</p>
</div>
<p>If you use this method, then you authenticate via:</p>
<pre class="r"><code>library(RSiteCatalyst)

key &lt;- Sys.getenv(&quot;ADOBE_KEY_OLD&quot;)
secret &lt;- Sys.getenv(&quot;ADOBE_SECRET_OLD&quot;)

SCAuth(key, secret)</code></pre>
<pre><code>## [1] &quot;Credentials Saved in RSiteCatalyst Namespace.&quot;</code></pre>
<p>The <code>SCAuth()</code> function will return <code>[1] &quot;Credentials Saved in RSiteCatalyst Namespace.&quot;</code></p>
</div>
<div id="fetching-report-suites" class="section level1">
<h1>Fetching Report Suites</h1>
<p>Once you have setup your authentication method, call the SCAuth() function at the start of every new R session.</p>
<p>You can test the connection by calling the account report suites via:</p>
<pre class="r"><code>suites &lt;- GetReportSuites()
head(suites)</code></pre>
<pre><code>##                            rsid            site_title virtual
## 1     vrs_grecoi0_adamprospects        Adam Prospects    TRUE
## 2              grecodemystified Analytics Demystified      NA
## 3 vrs_grecoi0_excludeexcelposts   Exclude Excel Posts    TRUE
## 4               grecofretzindev           Fretzin Dev      NA
## 5              grecofretzinprod    Fretzin Production      NA
## 6                       grecoau Greco, Inc. Australia      NA</code></pre>
</div>
<div id="various-other-meta-data" class="section level1">
<h1>Various other meta data</h1>
<p>These are useful to keep for calling data reports.</p>
<p>Descriptions of various elements, metrics etc. for the <a href="https://marketing.adobe.com/developer/documentation/analytics-reporting-1-4/elements">1.4 version of the API is found here.</a></p>
<pre class="r"><code>segments &lt;- GetSegments(&quot;grecodemystified&quot;)
segments</code></pre>
<pre><code>##                                id                         name folder
## 1        537d5cd1e4b0ca661c62662e Cart Abandoned Visits (CORP)       
## 2 s12525_57dbfe15e4b0e5fd48ef5efa      Searched Site for &quot;KPI&quot;       
##   class suite_enabled read_only     report_suite
## 1               FALSE     FALSE grecodemystified
## 2               FALSE     FALSE grecodemystified</code></pre>
<pre class="r"><code>calc_metrics &lt;- GetCalculatedMetrics(&quot;grecodemystified&quot;)</code></pre>
<pre><code>## [1] &quot;No Calculated Metrics Defined For This Report Suite&quot;</code></pre>
<pre class="r"><code>calc_metrics</code></pre>
<pre><code>## [1] &quot;No Calculated Metrics Defined For This Report Suite&quot;</code></pre>
<pre class="r"><code>classifications &lt;- GetClassifications(&quot;grecodemystified&quot;)
classifications</code></pre>
<pre><code>##                rsid            site_title                id
## 1  grecodemystified Analytics Demystified      trackingcode
## 2  grecodemystified Analytics Demystified      trackingcode
## 3  grecodemystified Analytics Demystified      trackingcode
## 4  grecodemystified Analytics Demystified      trackingcode
## 5  grecodemystified Analytics Demystified      trackingcode
## 6  grecodemystified Analytics Demystified      trackingcode
## 7  grecodemystified Analytics Demystified             evar5
## 8  grecodemystified Analytics Demystified             evar6
## 9  grecodemystified Analytics Demystified firsttouchchannel
## 10 grecodemystified Analytics Demystified firsttouchchannel
## 11 grecodemystified Analytics Demystified  lasttouchchannel
## 12 grecodemystified Analytics Demystified  lasttouchchannel
##                     element_name  classification_name description
## 1                  Tracking Code    Creative Elements            
## 2                  Tracking Code            Campaigns            
## 3                  Tracking Code               Source            
## 4                  Tracking Code               Medium            
## 5                  Tracking Code Campaign Description            
## 6                  Tracking Code       Campaign Owner            
## 7           Blog Post Title (v5)  Blog Post Type (v5)            
## 8        Demandbase Company (v6)      Competitor Flag            
## 9  First Touch Marketing Channel     First Touch Cost            
## 10 First Touch Marketing Channel   First Touch Budget            
## 11  Last Touch Marketing Channel      Last Touch Cost            
## 12  Last Touch Marketing Channel    Last Touch Budget            
##                type date_enabled      metric_id
## 1              text        FALSE           &lt;NA&gt;
## 2              text         TRUE           &lt;NA&gt;
## 3              text        FALSE           &lt;NA&gt;
## 4              text        FALSE           &lt;NA&gt;
## 5              text        FALSE           &lt;NA&gt;
## 6              text        FALSE           &lt;NA&gt;
## 7              text        FALSE           &lt;NA&gt;
## 8              text        FALSE           &lt;NA&gt;
## 9  numeric_currency           NA div_mult_1_221
## 10 numeric_currency           NA div_mult_3_221
## 11 numeric_currency           NA div_mult_2_223
## 12 numeric_currency           NA div_mult_4_223</code></pre>
<pre class="r"><code>elements &lt;- GetElements(&quot;grecodemystified&quot;)
head(elements)</code></pre>
<pre><code>##               id                name correlation subrelation
## 1 accountsummary Report Suite Totals        TRUE       FALSE
## 2       activity            Activity       FALSE        TRUE
## 3        browser             Browser        TRUE        TRUE
## 4  browserheight      Browser Height        TRUE       FALSE
## 5    browsertype        Browser Type        TRUE        TRUE
## 6   browserwidth       Browser Width        TRUE       FALSE
##   max_pathing_steps             rsid
## 1                NA grecodemystified
## 2                NA grecodemystified
## 3                NA grecodemystified
## 4                NA grecodemystified
## 5                NA grecodemystified
## 6                NA grecodemystified</code></pre>
<pre class="r"><code>metrics &lt;- GetMetrics(&quot;grecodemystified&quot;)
head(metrics)</code></pre>
<pre><code>##                       id                       name   type decimals
## 1    activityconversions       Activity Conversions number        0
## 2    activityimpressions       Activity Impressions number        0
## 3       averagepagedepth         Average Page Depth number        0
## 4 averagetimespentonpage Average Time Spent on Page   time        1
## 5 averagetimespentonsite Average Time Spent on Site   time        1
## 6      averagevisitdepth        Average Visit Depth number        0
##   formula             rsid
## 1      NA grecodemystified
## 2      NA grecodemystified
## 3      NA grecodemystified
## 4      NA grecodemystified
## 5      NA grecodemystified
## 6      NA grecodemystified</code></pre>
<pre class="r"><code>props &lt;- GetProps(&quot;grecodemystified&quot;)
head(props)</code></pre>
<pre><code>##      id                         name enabled description pathing_enabled
## 1 prop1     Navigation Elements (p1)    TRUE                        TRUE
## 2 prop2 Internal Search Keyword (p2)    TRUE                        TRUE
## 3 prop3     # of Search Results (p3)    TRUE                        TRUE
## 4 prop4                     Custom 4   FALSE                       FALSE
## 5 prop5         Blog Post Title (p5)    TRUE                        TRUE
## 6 prop6      Demandbase Company (p6)    TRUE                       FALSE
##   list_enabled participation_enabled case_insensitive
## 1        FALSE                 FALSE            FALSE
## 2        FALSE                 FALSE            FALSE
## 3        FALSE                 FALSE            FALSE
## 4        FALSE                 FALSE            FALSE
## 5        FALSE                 FALSE            FALSE
## 6        FALSE                 FALSE            FALSE
##   case_insensitive_date_enabled     report_suite
## 1                            NA grecodemystified
## 2                            NA grecodemystified
## 3                            NA grecodemystified
## 4                            NA grecodemystified
## 5                            NA grecodemystified
## 6                            NA grecodemystified</code></pre>
<pre class="r"><code>evars &lt;- GetEvars(&quot;grecodemystified&quot;)
head(evars)</code></pre>
<pre><code>##                            name        type           id expiration_type
## 1                 Tracking Code text_string trackingcode            week
## 2      Navigation Elements (v1) text_string        evar1           visit
## 3 Internal Search Keywords (v2) text_string        evar2           visit
## 4         Blog Post Author (v3) text_string        evar3           visit
## 5   Blog Post Publish Date (v4) text_string        evar4           visit
## 6          Blog Post Title (v5) text_string        evar5           visit
##   expiration_custom_days  allocation_type description enabled
## 1                      1 most_recent_last        &lt;NA&gt;      NA
## 2                      1 most_recent_last                TRUE
## 3                      1 most_recent_last                TRUE
## 4                      1 most_recent_last                TRUE
## 5                      1 most_recent_last                TRUE
## 6                      1 most_recent_last                TRUE
##       report_suite
## 1 grecodemystified
## 2 grecodemystified
## 3 grecodemystified
## 4 grecodemystified
## 5 grecodemystified
## 6 grecodemystified</code></pre>
<p>Read the RSiteCatalyst help files for a full function list.</p>
</div>
<div id="fetching-data-reports" class="section level1">
<h1>Fetching Data Reports</h1>
<p>There are 5 different types of Adobe Analytics reports that can be pulled out via the API:</p>
<ul>
<li>Overtime - <code>QueueOvertime()</code></li>
<li>Ranked - <code>QueueRanked()</code></li>
<li>Trended - <code>QueueTrended()</code></li>
<li>Pathing - <code>QueuePathing()</code></li>
<li>Fallout - <code>QueueFallout()</code></li>
</ul>
<p>See the characteristics of the <a href="https://marketing.adobe.com/developer/documentation/sitecatalyst-reporting/r-queueovertime">reports here</a></p>
<div id="advanced-api-fetching" class="section level2">
<h2>Advanced API fetching</h2>
<p>If you are not covered by the existing template calls, other API calls can be made via <code>SubmitJsonQueueReport</code> if you build the JSON yourself. It is suggested to use R lists and the library <code>jsonlite</code> to create these.</p>
</div>
<div id="api-response-time" class="section level2">
<h2>API response time</h2>
<ul>
<li>Response times for the API is variable</li>
<li>It can take anywhere between 10 seconds and 5 minutes or even timeout.</li>
<li>Size of the requested report doesn’t make much impact (within reason)</li>
<li>Recommend a function to wrap around API calls to retry if an error detected if used in automatic scripts.</li>
<li>The first call is most expensive - subsequent calls are cached.</li>
</ul>
</div>
</div>
<div id="demo-api-calls" class="section level1">
<h1>Demo API calls</h1>
<p>We set some common parameters here:</p>
<pre class="r"><code>date.from &lt;- &quot;2016-03-01&quot;
date.to &lt;- &quot;2016-03-8&quot;
reportsuite.id &lt;- &quot;grecodemystified&quot;</code></pre>
<div id="overtime" class="section level2">
<h2>Overtime</h2>
<p>Returns an overtime report. This is similar to the key metrics report in that the only granularity allowed is time.</p>
<p>QueueOvertime requires a start and end date, a reportsuite ID, and a character vector of metrics.</p>
<pre class="r"><code>metrics &lt;- c(&quot;visits&quot;,&quot;uniquevisitors&quot;,&quot;pageviews&quot;)

## wrap in system.time to report how long it takes
overtime.data &lt;- QueueOvertime(reportsuite.id, date.from, date.to, metrics)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Received overtime report.&quot;</code></pre>
<pre class="r"><code>head(overtime.data)</code></pre>
<pre><code>##     datetime              name year month day segment.id segment.name
## 1 2016-03-01 Tue.  1 Mar. 2016 2016     3   1                        
## 2 2016-03-02 Wed.  2 Mar. 2016 2016     3   2                        
## 3 2016-03-03 Thu.  3 Mar. 2016 2016     3   3                        
## 4 2016-03-04 Fri.  4 Mar. 2016 2016     3   4                        
## 5 2016-03-05 Sat.  5 Mar. 2016 2016     3   5                        
## 6 2016-03-06 Sun.  6 Mar. 2016 2016     3   6                        
##   visits uniquevisitors pageviews
## 1   1554           1475      2100
## 2   1518           1419      2049
## 3   1454           1352      1973
## 4   1118           1045      1577
## 5    395            362       556
## 6    663            626      1040</code></pre>
<p>You may also wish to set any of the 5 optional named parameters.</p>
<pre class="r"><code>metrics &lt;- c(&quot;visits&quot;,&quot;uniquevisitors&quot;,&quot;pageviews&quot;)
date.granularity &lt;- &quot;hour&quot;
segment.id &lt;- &quot;Visit_Natural_Search&quot;
anomaly.detection &lt;- FALSE
data.current &lt;- TRUE
expedite &lt;- FALSE ## only can set to TRUE if you have permission

overtime.data &lt;- QueueOvertime(reportsuite.id, 
                                           date.from, date.to, 
                                           metrics,
                                           date.granularity = date.granularity,
                                           segment.id = segment.id,
                                           anomaly.detection = anomaly.detection,
                                           data.current = data.current,
                                           expedite = expedite)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Received overtime report.&quot;</code></pre>
<div id="data-format" class="section level3">
<h3>Data format</h3>
<p>Report data is returned with the following R classes:</p>
<pre class="r"><code>knitr::kable(head(overtime.data))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">datetime</th>
<th align="left">name</th>
<th align="right">year</th>
<th align="right">month</th>
<th align="right">day</th>
<th align="right">hour</th>
<th align="left">segment.id</th>
<th align="left">segment.name</th>
<th align="right">visits</th>
<th align="right">uniquevisitors</th>
<th align="right">pageviews</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2016-03-01 00:00:00</td>
<td align="left">Tue. 1 Mar. 2016</td>
<td align="right">2016</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">Visit_Natural_Search</td>
<td align="left">Visits from Natural Search</td>
<td align="right">41</td>
<td align="right">41</td>
<td align="right">44</td>
</tr>
<tr class="even">
<td align="left">2016-03-01 01:00:00</td>
<td align="left">Tue. 1 Mar. 2016 (Hour 1)</td>
<td align="right">2016</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Visit_Natural_Search</td>
<td align="left">Visits from Natural Search</td>
<td align="right">42</td>
<td align="right">42</td>
<td align="right">46</td>
</tr>
<tr class="odd">
<td align="left">2016-03-01 02:00:00</td>
<td align="left">Tue. 1 Mar. 2016 (Hour 2)</td>
<td align="right">2016</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Visit_Natural_Search</td>
<td align="left">Visits from Natural Search</td>
<td align="right">59</td>
<td align="right">59</td>
<td align="right">79</td>
</tr>
<tr class="even">
<td align="left">2016-03-01 03:00:00</td>
<td align="left">Tue. 1 Mar. 2016 (Hour 3)</td>
<td align="right">2016</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">Visit_Natural_Search</td>
<td align="left">Visits from Natural Search</td>
<td align="right">62</td>
<td align="right">62</td>
<td align="right">72</td>
</tr>
<tr class="odd">
<td align="left">2016-03-01 04:00:00</td>
<td align="left">Tue. 1 Mar. 2016 (Hour 4)</td>
<td align="right">2016</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="left">Visit_Natural_Search</td>
<td align="left">Visits from Natural Search</td>
<td align="right">49</td>
<td align="right">49</td>
<td align="right">66</td>
</tr>
<tr class="even">
<td align="left">2016-03-01 05:00:00</td>
<td align="left">Tue. 1 Mar. 2016 (Hour 5)</td>
<td align="right">2016</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">Visit_Natural_Search</td>
<td align="left">Visits from Natural Search</td>
<td align="right">61</td>
<td align="right">61</td>
<td align="right">72</td>
</tr>
</tbody>
</table>
<pre class="r"><code>str(overtime.data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    192 obs. of  11 variables:
##  $ datetime      : POSIXct, format: &quot;2016-03-01 00:00:00&quot; &quot;2016-03-01 01:00:00&quot; ...
##  $ name          : chr  &quot;Tue.  1 Mar. 2016&quot; &quot;Tue.  1 Mar. 2016 (Hour 1)&quot; &quot;Tue.  1 Mar. 2016 (Hour 2)&quot; &quot;Tue.  1 Mar. 2016 (Hour 3)&quot; ...
##  $ year          : int  2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 ...
##  $ month         : int  3 3 3 3 3 3 3 3 3 3 ...
##  $ day           : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ hour          : int  0 1 2 3 4 5 6 7 8 9 ...
##  $ segment.id    : chr  &quot;Visit_Natural_Search&quot; &quot;Visit_Natural_Search&quot; &quot;Visit_Natural_Search&quot; &quot;Visit_Natural_Search&quot; ...
##  $ segment.name  : chr  &quot;Visits from Natural Search&quot; &quot;Visits from Natural Search&quot; &quot;Visits from Natural Search&quot; &quot;Visits from Natural Search&quot; ...
##  $ visits        : num  41 42 59 62 49 61 80 91 96 62 ...
##  $ uniquevisitors: num  41 42 59 62 49 61 80 91 95 61 ...
##  $ pageviews     : num  44 46 79 72 66 72 105 108 116 72 ...</code></pre>
</div>
</div>
<div id="ranked" class="section level2">
<h2>Ranked</h2>
<p>Returns a ranked report. This is an ordered list of elements and associated metrics with no time granularity.</p>
<p>QueueRanked requires a start and end date, a reportsuite ID, a character vector of elements and a character vector of metrics.</p>
<pre class="r"><code>metrics &lt;- c(&quot;visits&quot;,&quot;uniquevisitors&quot;,&quot;pageviews&quot;,&quot;event1&quot;)
elements &lt;- c(&quot;page&quot;,&quot;geoCountry&quot;,&quot;geoCity&quot;)

ranked.data &lt;- QueueRanked(reportsuite.id, date.from, date.to, metrics, elements)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Requesting URL attempt #3&quot;
## [1] &quot;Requesting URL attempt #4&quot;
## [1] &quot;Received ranked report.&quot;</code></pre>
<p>You may also wish to set any of the 6 optional named parameters. The 1.4 API only supports this for the first element specified. In the example below, selected applies to the first element, page.</p>
<pre class="r"><code>metrics &lt;- c(&quot;visits&quot;,&quot;uniquevisitors&quot;,&quot;pageviews&quot;,&quot;event1&quot;,&quot;event2&quot;)
elements &lt;- c(&quot;page&quot;,&quot;geoCountry&quot;,&quot;geoCity&quot;)
top &lt;- 10
start &lt;- 10
selected &lt;- c(&quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot;,
              &quot;excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/&quot;)
segment.id &lt;- &quot;&quot;
data.current &lt;- TRUE
expedite &lt;- FALSE ## only can set to TRUE if you have permission

ranked.data &lt;- QueueRanked(reportsuite.id, 
                           date.from, date.to,
                           metrics,
                           elements,
                           top = top,
                           start = start,
                           selected = selected,
                           segment.id = segment.id,
                           data.current = data.current,
                           expedite = expedite)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Received ranked report.&quot;</code></pre>
<pre class="r"><code>unique(ranked.data$page)</code></pre>
<pre><code>## [1] &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot;     
## [2] &quot;excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/&quot;</code></pre>
<div id="data-format-1" class="section level3">
<h3>Data format</h3>
<p>Report data is returned with the following R classes:</p>
<pre class="r"><code>knitr::kable(head(ranked.data))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">page</th>
<th align="left">geoCountry</th>
<th align="left">geoCity</th>
<th align="right">visits</th>
<th align="right">uniquevisitors</th>
<th align="right">pageviews</th>
<th align="right">event1</th>
<th align="right">event2</th>
<th align="left">segment.id</th>
<th align="left">segment.name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">New York (New York, United States)</td>
<td align="right">22</td>
<td align="right">22</td>
<td align="right">23</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Houston (Texas, United States)</td>
<td align="right">12</td>
<td align="right">12</td>
<td align="right">12</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Los Angeles (California, United States)</td>
<td align="right">12</td>
<td align="right">11</td>
<td align="right">13</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">San Diego (California, United States)</td>
<td align="right">11</td>
<td align="right">10</td>
<td align="right">12</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Seattle (Washington, United States)</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">San Francisco (California, United States)</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<pre class="r"><code>str(ranked.data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    1775 obs. of  10 variables:
##  $ page          : chr  &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; ...
##  $ geoCountry    : chr  &quot;United States&quot; &quot;United States&quot; &quot;United States&quot; &quot;United States&quot; ...
##  $ geoCity       : chr  &quot;New York (New York, United States)&quot; &quot;Houston (Texas, United States)&quot; &quot;Los Angeles (California, United States)&quot; &quot;San Diego (California, United States)&quot; ...
##  $ visits        : num  22 12 12 11 8 8 8 7 7 7 ...
##  $ uniquevisitors: num  22 12 11 10 8 8 8 7 6 5 ...
##  $ pageviews     : num  23 12 13 12 8 8 8 7 7 7 ...
##  $ event1        : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ event2        : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ segment.id    : Factor w/ 1 level &quot;&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ segment.name  : Factor w/ 1 level &quot;&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
<div id="trended" class="section level2">
<h2>Trended</h2>
<p>Returns a trended report. This is an ordered list of elements and associated metrics with time granularity.</p>
<p>QueueTrended requires a start and end date, a reportsuite ID, a character vector of elements and a character vector of metrics.</p>
<pre class="r"><code>metrics &lt;- c(&quot;visits&quot;,&quot;uniquevisitors&quot;,&quot;pageviews&quot;,&quot;event1&quot;)
elements &lt;- c(&quot;page&quot;,&quot;geoCountry&quot;,&quot;geoCity&quot;)

trended.data &lt;- QueueTrended(reportsuite.id, date.from, date.to, metrics, elements)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Requesting URL attempt #3&quot;
## [1] &quot;Requesting URL attempt #4&quot;
## [1] &quot;Requesting URL attempt #5&quot;
## [1] &quot;Requesting URL attempt #6&quot;
## [1] &quot;Requesting URL attempt #7&quot;
## [1] &quot;Requesting URL attempt #8&quot;
## [1] &quot;Requesting URL attempt #9&quot;
## [1] &quot;Requesting URL attempt #10&quot;
## [1] &quot;Requesting URL attempt #11&quot;
## [1] &quot;Received trended report.&quot;</code></pre>
<p>You may also wish to set any of the 7 optional named parameters. As with <code>QueueRanked()</code> the 1.4 API only supports selected for the first element specified.</p>
<pre class="r"><code>metrics &lt;- c(&quot;visits&quot;,&quot;uniquevisitors&quot;,&quot;pageviews&quot;,&quot;event1&quot;)
elements &lt;- c(&quot;page&quot;,&quot;geoCountry&quot;,&quot;geoCity&quot;)
top &lt;- 100
start &lt;- 100
selected &lt;- c(&quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot;,
              &quot;excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/&quot;)
date.granularity &lt;- &quot;hour&quot;
segment.id &lt;- &quot;&quot;
data.current &lt;- TRUE
expedite &lt;- FALSE

trended.data &lt;- QueueTrended(reportsuite.id, 
                            date.from, date.to,
                            metrics,
                            elements,
                            top = top,
                            start = start,
                            selected = selected,
                            segment.id = segment.id,
                            data.current = data.current,
                            expedite = expedite)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Requesting URL attempt #3&quot;
## [1] &quot;Requesting URL attempt #4&quot;
## [1] &quot;Requesting URL attempt #5&quot;
## [1] &quot;Requesting URL attempt #6&quot;
## [1] &quot;Received trended report.&quot;</code></pre>
<div id="data-format-2" class="section level3">
<h3>Data format</h3>
<p>Report data is returned with the following R classes:</p>
<pre class="r"><code>## to print in table convert POSIXlt to Date 
trended.data$datetime &lt;- as.Date(trended.data$datetime)
knitr::kable(head(trended.data))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">datetime</th>
<th align="left">page</th>
<th align="left">geoCountry</th>
<th align="left">geoCity</th>
<th align="right">visits</th>
<th align="right">uniquevisitors</th>
<th align="right">pageviews</th>
<th align="right">event1</th>
<th align="left">segment.id</th>
<th align="left">segment.name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2016-03-01</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">New York (New York, United States)</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2016-03-01</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Charlotte (North Carolina, United States)</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">2016-03-01</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Seattle (Washington, United States)</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2016-03-01</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Phoenix (Arizona, United States)</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">2016-03-01</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Holmesville (Ohio, United States)</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">2016-03-01</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">United States</td>
<td align="left">Richmond (Virginia, United States)</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<pre class="r"><code>str(trended.data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    2648 obs. of  10 variables:
##  $ datetime      : Date, format: &quot;2016-03-01&quot; &quot;2016-03-01&quot; ...
##  $ page          : chr  &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; ...
##  $ geoCountry    : chr  &quot;United States&quot; &quot;United States&quot; &quot;United States&quot; &quot;United States&quot; ...
##  $ geoCity       : chr  &quot;New York (New York, United States)&quot; &quot;Charlotte (North Carolina, United States)&quot; &quot;Seattle (Washington, United States)&quot; &quot;Phoenix (Arizona, United States)&quot; ...
##  $ visits        : num  5 4 3 3 2 2 2 2 2 2 ...
##  $ uniquevisitors: num  5 4 3 1 2 2 2 2 2 1 ...
##  $ pageviews     : num  5 4 3 3 2 2 2 2 2 4 ...
##  $ event1        : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ segment.id    : Factor w/ 1 level &quot;&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ segment.name  : Factor w/ 1 level &quot;&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
<div id="pathing" class="section level2">
<h2>Pathing</h2>
<p>Returns a pathing report. This is an ordered list of paths matching the specified pattern.</p>
<p>QueuePathing requires a start and end date, a reportsuite ID, a single element, a single metric and a pattern of element values that defined the path.</p>
<pre class="r"><code>metric &lt;- &quot;pageviews&quot;
element &lt;- &quot;page&quot;
pattern &lt;- c(&quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot;,
             &quot;::anything::&quot;,
             &quot;::anything::&quot;)

pathing.data &lt;- QueuePathing(reportsuite.id, 
                             date.from, date.to, 
                             metric, 
                             element, 
                             pattern)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Received pathing report.&quot;</code></pre>
<div id="data-format-3" class="section level3">
<h3>Data format</h3>
<p>Report data is returned with the following R classes:</p>
<pre class="r"><code>knitr::kable(head(pathing.data))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">step.1</th>
<th align="left">step.2</th>
<th align="left">step.3</th>
<th align="right">count</th>
<th align="left">segment.id</th>
<th align="left">segment.name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">excel-tips/excel-dropdowns-done-right/</td>
<td align="left">Exited Site</td>
<td align="right">171</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">excel-tips/excel-dropdowns-done-right/</td>
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="right">12</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/</td>
<td align="left">Exited Site</td>
<td align="right">11</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">home</td>
<td align="left">Exited Site</td>
<td align="right">3</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">conferencescommunity/demystified-days-has-been-postponed/</td>
<td align="left">Exited Site</td>
<td align="right">2</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left">excel-tips/excel-dropdowns-done-right/</td>
<td align="left">home</td>
<td align="right">2</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<pre class="r"><code>str(pathing.data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    18 obs. of  6 variables:
##  $ step.1      : chr  &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; ...
##  $ step.2      : chr  &quot;excel-tips/excel-dropdowns-done-right/&quot; &quot;excel-tips/excel-dropdowns-done-right/&quot; &quot;excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/&quot; &quot;home&quot; ...
##  $ step.3      : chr  &quot;Exited Site&quot; &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;Exited Site&quot; &quot;Exited Site&quot; ...
##  $ count       : num  171 12 11 3 2 2 2 2 1 1 ...
##  $ segment.id  : Factor w/ 1 level &quot;&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ segment.name: Factor w/ 1 level &quot;&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
<div id="fallout" class="section level2">
<h2>Fallout</h2>
<p>Returns a fallout report. This is a pathed list of elements, with fallout values for each.</p>
<p>QueuePathing requires a start and end date, a reportsuite ID, a single element, a character vector of metrics and a character vector of element values that defined the checkpoints.</p>
<pre class="r"><code>metrics &lt;- &quot;pageviews&quot;
element &lt;- &quot;page&quot;
checkpoints &lt;- c(&quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot;,
                 &quot;excel-tips/excel-dropdowns-done-right/&quot;,
                 &quot;excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/&quot;)

fallout.data &lt;- QueueFallout(reportsuite.id, date.from, date.to, metrics, element, checkpoints)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Received fallout report.&quot;</code></pre>
<div id="data-format-4" class="section level3">
<h3>Data format</h3>
<p>Report data is returned with the following R classes:</p>
<pre class="r"><code>knitr::kable(head(fallout.data))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">url</th>
<th align="left">pageviews</th>
<th align="left">segment.id</th>
<th align="left">segment.name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/</td>
<td align="left"><a href="http://analyticsdemystified.com/excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges" class="uri">http://analyticsdemystified.com/excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges</a></td>
<td align="left">1692</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">excel-tips/excel-dropdowns-done-right/</td>
<td align="left"><a href="http://analyticsdemystified.com/excel-tips/excel-dropdowns-done-right" class="uri">http://analyticsdemystified.com/excel-tips/excel-dropdowns-done-right</a></td>
<td align="left">190</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/</td>
<td align="left"><a href="http://analyticsdemystified.com/excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2" class="uri">http://analyticsdemystified.com/excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2</a></td>
<td align="left">3</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<pre class="r"><code>str(fallout.data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  5 variables:
##  $ name        : chr  &quot;excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges/&quot; &quot;excel-tips/excel-dropdowns-done-right/&quot; &quot;excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/&quot;
##  $ url         : chr  &quot;http://analyticsdemystified.com/excel-tips/excel-dropdowns-done-right-data-validation-and-named-ranges&quot; &quot;http://analyticsdemystified.com/excel-tips/excel-dropdowns-done-right&quot; &quot;http://analyticsdemystified.com/excel-tips/excel-dynamic-named-ranges-never-manually-updating-your-charts-2&quot;
##  $ pageviews   :List of 3
##   ..$ : chr &quot;1692&quot;
##   ..$ : chr &quot;190&quot;
##   ..$ : chr &quot;3&quot;
##  $ segment.id  : Factor w/ 1 level &quot;&quot;: 1 1 1
##  $ segment.name: Factor w/ 1 level &quot;&quot;: 1 1 1</code></pre>
</div>
</div>
</div>
<div id="example" class="section level1">
<h1>Example</h1>
<p>A typical project flow is:</p>
<ol style="list-style-type: decimal">
<li>Determine question to be answered via data</li>
<li>Scope out the required metrics, props, events etc.</li>
<li>Download small sample to test data is in correct format</li>
<li>Transform data to shape you need for output</li>
<li>Perform statistical modelling etc.</li>
<li>Revisit step 2 if necessary</li>
<li>Finalise output with sample data</li>
<li>Download full data if necessary</li>
<li>Automate scripts if necessary</li>
</ol>
<p>We demonstrate the above with the question “Did my TV campaign have a significant effect on my SEO traffic?”</p>
<div id="pose-the-right-question" class="section level2">
<h2>Pose the right question</h2>
<p>We want to measure if a statistical significant effect occured to our Natural Search traffic segment when a TV campaign ran from X to Y</p>
</div>
<div id="scope-out-requirements" class="section level2">
<h2>Scope out requirements</h2>
<p>We require sessions in the Natural Search traffic segment trended over time.</p>
</div>
<div id="download-sample" class="section level2">
<h2>Download sample</h2>
<pre class="r"><code>date.from &lt;- &quot;2016-01-01&quot;
date.to &lt;- &quot;2016-09-30&quot;
reportsuite.id &lt;- &quot;grecodemystified&quot;
metrics &lt;- &quot;visits&quot;
segment.id &lt;- &quot;Visit_Natural_Search&quot;
date.granularity &lt;- &quot;day&quot;

overtime.data &lt;- QueueOvertime(reportsuite.id, 
                               date.from, date.to, 
                               metrics,
                               date.granularity = date.granularity,
                               segment.id = segment.id)</code></pre>
<pre><code>## [1] &quot;Requesting URL attempt #1&quot;
## [1] &quot;Requesting URL attempt #2&quot;
## [1] &quot;Received overtime report.&quot;</code></pre>
<p>The data is in this format:</p>
<pre class="r"><code>str(overtime.data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    274 obs. of  8 variables:
##  $ datetime    : POSIXct, format: &quot;2016-01-01&quot; &quot;2016-01-02&quot; ...
##  $ name        : chr  &quot;Fri.  1 Jan. 2016&quot; &quot;Sat.  2 Jan. 2016&quot; &quot;Sun.  3 Jan. 2016&quot; &quot;Mon.  4 Jan. 2016&quot; ...
##  $ year        : int  2016 2016 2016 2016 2016 2016 2016 2016 2016 2016 ...
##  $ month       : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ day         : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ segment.id  : chr  &quot;Visit_Natural_Search&quot; &quot;Visit_Natural_Search&quot; &quot;Visit_Natural_Search&quot; &quot;Visit_Natural_Search&quot; ...
##  $ segment.name: chr  &quot;Visits from Natural Search&quot; &quot;Visits from Natural Search&quot; &quot;Visits from Natural Search&quot; &quot;Visits from Natural Search&quot; ...
##  $ visits      : num  188 247 326 993 1128 ...</code></pre>
</div>
<div id="transform-data" class="section level2">
<h2>Transform data</h2>
<p>This is usually the most involved step, but for this simple example we just need the datetime and visit columns</p>
<pre class="r"><code>## subset to columns we need
model_data &lt;- overtime.data[,c(&#39;datetime&#39;, &#39;visits&#39;)]

## make datetime a Date object
model_data$datetime &lt;- as.Date(model_data$datetime)</code></pre>
<p>A quick exploratory plot:</p>
<pre class="r"><code>plot(model_data, type = &quot;l&quot;)</code></pre>
<p><img src="adobe-connector_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
<div id="statistical-modelling" class="section level2">
<h2>Statistical modelling</h2>
<p>We will now use the <a href="https://google.github.io/CausalImpact/">CausalImpact</a> package to test the effect of a pretend TV campaign starting around March 10th</p>
<pre class="r"><code>## install CausalImpact if you don&#39;t already have it
## https://google.github.io/CausalImpact/

## load CausalImpact
library(CausalImpact)
## load zoo for working with timeseries
library(zoo)

## turn model_data into a zoo object to work with CausalImpact
model_zoo &lt;- zoo(model_data$visits, order.by = model_data$datetime)

## specify the before and after event segments
## assuming the TV campaign started on 3rd March, 2016
pre.period &lt;- as.Date(c(&quot;2016-02-25&quot;, &quot;2016-07-10&quot;))
post.period &lt;- as.Date(c(&quot;2016-07-11&quot;,&quot;2016-09-25&quot;))

impact &lt;- CausalImpact(model_zoo, pre.period, post.period) </code></pre>
<p>CausalImpact includes a verbal report and plot to show its findings:</p>
<pre class="r"><code>impact$report</code></pre>
<pre><code>## [1] &quot;\n\nDuring the post-intervention period, the response variable had an average value of approx. 959.71. In the absence of an intervention, we would have expected an average response of 849.12. The 95% interval of this counterfactual prediction is [730.20, 977.99]. Subtracting this prediction from the observed response yields an estimate of the causal effect the intervention had on the response variable. This effect is 110.60 with a 95% interval of [-18.27, 229.52]. For a discussion of the significance of this effect, see below.\n\nSumming up the individual data points during the post-intervention period (which can only sometimes be meaningfully interpreted), the response variable had an overall value of 73.90K. Had the intervention not taken place, we would have expected a sum of 65.38K. The 95% interval of this prediction is [56.23K, 75.31K].\n\nThe above results are given in terms of absolute numbers. In relative terms, the response variable showed an increase of +13%. The 95% interval of this percentage is [-2%, +27%].\n\nThis means that, although the intervention appears to have caused a positive effect, this effect is not statistically significant when considering the entire post-intervention period as a whole. Individual days or shorter stretches within the intervention period may of course still have had a significant effect, as indicated whenever the lower limit of the impact time series (lower plot) was above zero. The apparent effect could be the result of random fluctuations that are unrelated to the intervention. This is often the case when the intervention period is very long and includes much of the time when the effect has already worn off. It can also be the case when the intervention period is too short to distinguish the signal from the noise. Finally, failing to find a significant effect can happen when there are not enough control variables or when these variables do not correlate well with the response variable during the learning period.\n\nThe probability of obtaining this effect by chance is very small (Bayesian one-sided tail-area probability p = 0.045). This means the causal effect can be considered statistically significant.&quot;</code></pre>
<pre class="r"><code>plot(impact)</code></pre>
<p><img src="adobe-connector_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="review-output" class="section level2">
<h2>Review output</h2>
<p>Many refinements to the model could be made, for instance:</p>
<ul>
<li>Also download control metrics such as direct visits, paid search that may be confounders</li>
<li>Combine the model data with TV spend data</li>
</ul>
<p>…but for now we assume the output is valuable and we want to publish.</p>
</div>
<div id="finalise-output" class="section level2">
<h2>Finalise Output</h2>
<p>For final display we use a D3 javascript library, <a href="https://rstudio.github.io/dygraphs/">Dygraphs</a>, to display the results:</p>
<pre class="r"><code>## install dygraphs if necessary
library(dygraphs)

## plot data kept in impact$series
plot_data &lt;- impact$series

dygraph(data=plot_data[,c(&#39;cum.effect&#39;, &#39;cum.effect.lower&#39;, &#39;cum.effect.upper&#39;)],
        main=&quot;Cumulative Impact of Event (95% confidence level)&quot;, group=&quot;ci&quot;) %&gt;%
  dyRangeSelector() %&gt;%
  dyEvent(x = as.Date(&quot;2016-03-10&quot;), &quot;TV Campaign&quot;) %&gt;%
  dySeries(c(&#39;cum.effect.lower&#39;, &#39;cum.effect&#39;, &#39;cum.effect.upper&#39;), label=&#39;Cumulative Effect&#39;)</code></pre>
<div id="htmlwidget-8f69d896175b67f81095" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-8f69d896175b67f81095">{"x":{"attrs":{"title":"Cumulative Impact of Event (95% confidence level)","labels":["day","Cumulative Effect"],"legend":"auto","retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":60}},"showRangeSelector":true,"rangeSelectorHeight":40,"rangeSelectorPlotFillColor":" #A7B1C4","rangeSelectorPlotStrokeColor":"#808FAB","interactionModel":"Dygraph.Interaction.defaultModel","customBars":true,"series":{"Cumulative Effect":{"axis":"y"}}},"scale":"daily","group":"ci","annotations":[],"shadings":[],"events":[{"pos":"2016-03-10T00:00:00.000Z","label":"TV Campaign","labelLoc":"top","color":"black","strokePattern":[7,3],"axis":"x"}],"format":"date","data":[["2016-01-01T00:00:00.000Z","2016-01-02T00:00:00.000Z","2016-01-03T00:00:00.000Z","2016-01-04T00:00:00.000Z","2016-01-05T00:00:00.000Z","2016-01-06T00:00:00.000Z","2016-01-07T00:00:00.000Z","2016-01-08T00:00:00.000Z","2016-01-09T00:00:00.000Z","2016-01-10T00:00:00.000Z","2016-01-11T00:00:00.000Z","2016-01-12T00:00:00.000Z","2016-01-13T00:00:00.000Z","2016-01-14T00:00:00.000Z","2016-01-15T00:00:00.000Z","2016-01-16T00:00:00.000Z","2016-01-17T00:00:00.000Z","2016-01-18T00:00:00.000Z","2016-01-19T00:00:00.000Z","2016-01-20T00:00:00.000Z","2016-01-21T00:00:00.000Z","2016-01-22T00:00:00.000Z","2016-01-23T00:00:00.000Z","2016-01-24T00:00:00.000Z","2016-01-25T00:00:00.000Z","2016-01-26T00:00:00.000Z","2016-01-27T00:00:00.000Z","2016-01-28T00:00:00.000Z","2016-01-29T00:00:00.000Z","2016-01-30T00:00:00.000Z","2016-01-31T00:00:00.000Z","2016-02-01T00:00:00.000Z","2016-02-02T00:00:00.000Z","2016-02-03T00:00:00.000Z","2016-02-04T00:00:00.000Z","2016-02-05T00:00:00.000Z","2016-02-06T00:00:00.000Z","2016-02-07T00:00:00.000Z","2016-02-08T00:00:00.000Z","2016-02-09T00:00:00.000Z","2016-02-10T00:00:00.000Z","2016-02-11T00:00:00.000Z","2016-02-12T00:00:00.000Z","2016-02-13T00:00:00.000Z","2016-02-14T00:00:00.000Z","2016-02-15T00:00:00.000Z","2016-02-16T00:00:00.000Z","2016-02-17T00:00:00.000Z","2016-02-18T00:00:00.000Z","2016-02-19T00:00:00.000Z","2016-02-20T00:00:00.000Z","2016-02-21T00:00:00.000Z","2016-02-22T00:00:00.000Z","2016-02-23T00:00:00.000Z","2016-02-24T00:00:00.000Z","2016-02-25T00:00:00.000Z","2016-02-26T00:00:00.000Z","2016-02-27T00:00:00.000Z","2016-02-28T00:00:00.000Z","2016-02-29T00:00:00.000Z","2016-03-01T00:00:00.000Z","2016-03-02T00:00:00.000Z","2016-03-03T00:00:00.000Z","2016-03-04T00:00:00.000Z","2016-03-05T00:00:00.000Z","2016-03-06T00:00:00.000Z","2016-03-07T00:00:00.000Z","2016-03-08T00:00:00.000Z","2016-03-09T00:00:00.000Z","2016-03-10T00:00:00.000Z","2016-03-11T00:00:00.000Z","2016-03-12T00:00:00.000Z","2016-03-13T00:00:00.000Z","2016-03-14T00:00:00.000Z","2016-03-15T00:00:00.000Z","2016-03-16T00:00:00.000Z","2016-03-17T00:00:00.000Z","2016-03-18T00:00:00.000Z","2016-03-19T00:00:00.000Z","2016-03-20T00:00:00.000Z","2016-03-21T00:00:00.000Z","2016-03-22T00:00:00.000Z","2016-03-23T00:00:00.000Z","2016-03-24T00:00:00.000Z","2016-03-25T00:00:00.000Z","2016-03-26T00:00:00.000Z","2016-03-27T00:00:00.000Z","2016-03-28T00:00:00.000Z","2016-03-29T00:00:00.000Z","2016-03-30T00:00:00.000Z","2016-03-31T00:00:00.000Z","2016-04-01T00:00:00.000Z","2016-04-02T00:00:00.000Z","2016-04-03T00:00:00.000Z","2016-04-04T00:00:00.000Z","2016-04-05T00:00:00.000Z","2016-04-06T00:00:00.000Z","2016-04-07T00:00:00.000Z","2016-04-08T00:00:00.000Z","2016-04-09T00:00:00.000Z","2016-04-10T00:00:00.000Z","2016-04-11T00:00:00.000Z","2016-04-12T00:00:00.000Z","2016-04-13T00:00:00.000Z","2016-04-14T00:00:00.000Z","2016-04-15T00:00:00.000Z","2016-04-16T00:00:00.000Z","2016-04-17T00:00:00.000Z","2016-04-18T00:00:00.000Z","2016-04-19T00:00:00.000Z","2016-04-20T00:00:00.000Z","2016-04-21T00:00:00.000Z","2016-04-22T00:00:00.000Z","2016-04-23T00:00:00.000Z","2016-04-24T00:00:00.000Z","2016-04-25T00:00:00.000Z","2016-04-26T00:00:00.000Z","2016-04-27T00:00:00.000Z","2016-04-28T00:00:00.000Z","2016-04-29T00:00:00.000Z","2016-04-30T00:00:00.000Z","2016-05-01T00:00:00.000Z","2016-05-02T00:00:00.000Z","2016-05-03T00:00:00.000Z","2016-05-04T00:00:00.000Z","2016-05-05T00:00:00.000Z","2016-05-06T00:00:00.000Z","2016-05-07T00:00:00.000Z","2016-05-08T00:00:00.000Z","2016-05-09T00:00:00.000Z","2016-05-10T00:00:00.000Z","2016-05-11T00:00:00.000Z","2016-05-12T00:00:00.000Z","2016-05-13T00:00:00.000Z","2016-05-14T00:00:00.000Z","2016-05-15T00:00:00.000Z","2016-05-16T00:00:00.000Z","2016-05-17T00:00:00.000Z","2016-05-18T00:00:00.000Z","2016-05-19T00:00:00.000Z","2016-05-20T00:00:00.000Z","2016-05-21T00:00:00.000Z","2016-05-22T00:00:00.000Z","2016-05-23T00:00:00.000Z","2016-05-24T00:00:00.000Z","2016-05-25T00:00:00.000Z","2016-05-26T00:00:00.000Z","2016-05-27T00:00:00.000Z","2016-05-28T00:00:00.000Z","2016-05-29T00:00:00.000Z","2016-05-30T00:00:00.000Z","2016-05-31T00:00:00.000Z","2016-06-01T00:00:00.000Z","2016-06-02T00:00:00.000Z","2016-06-03T00:00:00.000Z","2016-06-04T00:00:00.000Z","2016-06-05T00:00:00.000Z","2016-06-06T00:00:00.000Z","2016-06-07T00:00:00.000Z","2016-06-08T00:00:00.000Z","2016-06-09T00:00:00.000Z","2016-06-10T00:00:00.000Z","2016-06-11T00:00:00.000Z","2016-06-12T00:00:00.000Z","2016-06-13T00:00:00.000Z","2016-06-14T00:00:00.000Z","2016-06-15T00:00:00.000Z","2016-06-16T00:00:00.000Z","2016-06-17T00:00:00.000Z","2016-06-18T00:00:00.000Z","2016-06-19T00:00:00.000Z","2016-06-20T00:00:00.000Z","2016-06-21T00:00:00.000Z","2016-06-22T00:00:00.000Z","2016-06-23T00:00:00.000Z","2016-06-24T00:00:00.000Z","2016-06-25T00:00:00.000Z","2016-06-26T00:00:00.000Z","2016-06-27T00:00:00.000Z","2016-06-28T00:00:00.000Z","2016-06-29T00:00:00.000Z","2016-06-30T00:00:00.000Z","2016-07-01T00:00:00.000Z","2016-07-02T00:00:00.000Z","2016-07-03T00:00:00.000Z","2016-07-04T00:00:00.000Z","2016-07-05T00:00:00.000Z","2016-07-06T00:00:00.000Z","2016-07-07T00:00:00.000Z","2016-07-08T00:00:00.000Z","2016-07-09T00:00:00.000Z","2016-07-10T00:00:00.000Z","2016-07-11T00:00:00.000Z","2016-07-12T00:00:00.000Z","2016-07-13T00:00:00.000Z","2016-07-14T00:00:00.000Z","2016-07-15T00:00:00.000Z","2016-07-16T00:00:00.000Z","2016-07-17T00:00:00.000Z","2016-07-18T00:00:00.000Z","2016-07-19T00:00:00.000Z","2016-07-20T00:00:00.000Z","2016-07-21T00:00:00.000Z","2016-07-22T00:00:00.000Z","2016-07-23T00:00:00.000Z","2016-07-24T00:00:00.000Z","2016-07-25T00:00:00.000Z","2016-07-26T00:00:00.000Z","2016-07-27T00:00:00.000Z","2016-07-28T00:00:00.000Z","2016-07-29T00:00:00.000Z","2016-07-30T00:00:00.000Z","2016-07-31T00:00:00.000Z","2016-08-01T00:00:00.000Z","2016-08-02T00:00:00.000Z","2016-08-03T00:00:00.000Z","2016-08-04T00:00:00.000Z","2016-08-05T00:00:00.000Z","2016-08-06T00:00:00.000Z","2016-08-07T00:00:00.000Z","2016-08-08T00:00:00.000Z","2016-08-09T00:00:00.000Z","2016-08-10T00:00:00.000Z","2016-08-11T00:00:00.000Z","2016-08-12T00:00:00.000Z","2016-08-13T00:00:00.000Z","2016-08-14T00:00:00.000Z","2016-08-15T00:00:00.000Z","2016-08-16T00:00:00.000Z","2016-08-17T00:00:00.000Z","2016-08-18T00:00:00.000Z","2016-08-19T00:00:00.000Z","2016-08-20T00:00:00.000Z","2016-08-21T00:00:00.000Z","2016-08-22T00:00:00.000Z","2016-08-23T00:00:00.000Z","2016-08-24T00:00:00.000Z","2016-08-25T00:00:00.000Z","2016-08-26T00:00:00.000Z","2016-08-27T00:00:00.000Z","2016-08-28T00:00:00.000Z","2016-08-29T00:00:00.000Z","2016-08-30T00:00:00.000Z","2016-08-31T00:00:00.000Z","2016-09-01T00:00:00.000Z","2016-09-02T00:00:00.000Z","2016-09-03T00:00:00.000Z","2016-09-04T00:00:00.000Z","2016-09-05T00:00:00.000Z","2016-09-06T00:00:00.000Z","2016-09-07T00:00:00.000Z","2016-09-08T00:00:00.000Z","2016-09-09T00:00:00.000Z","2016-09-10T00:00:00.000Z","2016-09-11T00:00:00.000Z","2016-09-12T00:00:00.000Z","2016-09-13T00:00:00.000Z","2016-09-14T00:00:00.000Z","2016-09-15T00:00:00.000Z","2016-09-16T00:00:00.000Z","2016-09-17T00:00:00.000Z","2016-09-18T00:00:00.000Z","2016-09-19T00:00:00.000Z","2016-09-20T00:00:00.000Z","2016-09-21T00:00:00.000Z","2016-09-22T00:00:00.000Z","2016-09-23T00:00:00.000Z","2016-09-24T00:00:00.000Z","2016-09-25T00:00:00.000Z","2016-09-26T00:00:00.000Z","2016-09-27T00:00:00.000Z","2016-09-28T00:00:00.000Z","2016-09-29T00:00:00.000Z","2016-09-30T00:00:00.000Z"],[[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[-282.930423400758,457.442059074587,1180.72709165205],[-259.191444249926,880.974332257392,1887.02486350351],[-3.31858264862967,1343.43419867862,2595.67977873952],[232.66746589831,1792.79625589248,3216.78472838756],[118.025599137283,1878.19725809067,3584.27829448706],[-535.112431671791,1309.69485169792,3128.03908844682],[-1129.52846806208,895.350999749891,2848.17804663916],[-822.767897779529,1331.20291605049,3373.52081350045],[-439.551505611118,1810.00024104556,4065.32978133955],[-130.343800127797,2278.62798961069,4647.80386210348],[81.2040447026666,2708.24422706389,5228.4125567743],[61.66807130698,2776.7623453307,5557.68392951381],[-640.337902019688,2174.21308267205,5072.68996385548],[-1235.70086200821,1722.60893432924,4763.66731556224],[-815.173151387018,2243.18365076765,5341.37734036091],[-427.5555204025,2751.66862858707,5962.22178694747],[-48.1380484615511,3258.03086101776,6514.90379813955],[369.291885813058,3662.4761123303,7001.04673261414],[253.764695064834,3701.86769620673,7214.7187134891],[-584.844173276389,3113.38770022971,6760.59701940592],[-1105.21153528107,2643.2331136734,6475.12447479612],[-847.737455697759,3006.87226046788,6914.10263913422],[-345.191707782535,3496.34132771436,7459.18544364008],[21.815809086489,4000.77959591095,8235.37801714649],[458.978056999971,4490.18393762657,8872.63827064907],[454.554684292292,4573.50546486705,8969.81676941292],[-294.142507636105,3993.9231396853,8479.15081786658],[-757.35385505372,3568.23831370426,8022.82313028982],[-399.158577226248,3999.51076073732,8601.57877553691],[26.6883506131126,4590.64744450228,9254.12237462733],[489.532175750675,5137.67612913169,9880.45404138858],[750.625106106163,5547.84662160653,10253.4387658942],[784.971839914535,5663.13054343153,10510.8700744112],[297.644932383322,5076.45305505954,10017.7700713931],[-439.682598341373,4625.79354431873,9699.98251379089],[-231.838533447881,4881.47016473603,10172.6304143199],[67.9087266229908,5331.22097838356,10780.4950774038],[506.633448310167,5763.10425060382,11118.2773884839],[636.877701321297,6133.99934892941,11598.6311885278],[604.350703517703,6249.8237814598,12182.2890346509],[-231.715190368501,5663.57751913538,11478.1433351822],[-632.846736826847,5240.50903679151,11488.6639301549],[-430.677461208601,5608.44403430654,11750.2269526255],[-217.659638148267,6071.37646391545,12547.8930076253],[251.69263950974,6603.3790083463,13036.4001067155],[572.305870774697,6963.44042816636,13519.2671601049],[493.709213774913,7066.62135745556,13693.9281879751],[-177.066546672722,6497.80734029063,13115.9574662946],[-526.976482850558,6073.0372350947,12780.5299868919],[-291.251845928025,6419.4110691135,13328.7541421911],[53.2047898834571,6854.82194506447,13889.2941600919],[353.030466733355,7282.37524311279,14463.3328924642],[271.47306187349,7337.04947771947,14489.279512842],[93.4434903794318,7331.70845627913,14776.3277508783],[-584.880385840515,6729.22249496076,14359.3834061092],[-1127.17984639941,6234.75458158564,13832.5698417986],[-1755.79559335881,6089.20935373049,13786.8072507052],[-1259.73807316535,6429.63100153705,14476.9608472018],[-1113.83118435158,6867.1779622107,14624.1554305663],[-687.642539039138,7267.68800142052,15302.754408569],[-641.442500351171,7376.20633804801,15476.889153342],[-1452.63618190543,6787.71132652496,14936.4916698061],[-1914.51017801682,6345.20675674727,14446.8401065257],[-1881.52566799021,6699.79326421174,14955.7335677622],[-1412.9711953355,7127.3311351618,15459.8131998206],[-1353.07582655107,7554.69095546176,15840.2633229901],[-1143.90965346186,7996.83442745285,16394.5943120694],[-1012.08990461082,8137.90503290438,16597.3357761554],[-1607.83381566484,7615.11282891172,16036.4392086504],[-2245.6425210271,7195.44027904695,15718.1822685446],[-1939.31876596587,7675.66869672653,16252.6822662702],[-1228.86940111921,8233.74574303877,16946.6860322165],[-765.377165905462,8740.02595857583,17463.2393055289],[-307.85080374169,9269.31142560058,18288.1803522541],[23.3070634806645,9456.33965240457,18351.3525146716],[-1006.89753423227,8885.63713217684,17888.2031035048],[-1407.02038540735,8515.84905323898,17672.7750907056],[null,null,null],[null,null,null],[null,null,null],[null,null,null],[null,null,null]]]},"evals":["attrs.interactionModel"],"jsHooks":[]}</script>
</div>
<div id="automate" class="section level2">
<h2>Automate?</h2>
<p>For automation, the script could run every day to update with the most recent web data, and pull TV campaign dates from another maintained file.</p>
<p>The results could also be made available via a JSON API using a service such as [OpenCPU], for display in other departments dashboards or similar.</p>
<p>A final step could be to alter marketing spend based on the results of the function - for instance increasing brand PPC spend for TV campaigns that have a poor effect.</p>
</div>
</div>
<div id="data-strategy-for-larger-data" class="section level1">
<h1>Data strategy for larger data</h1>
<p>It may be that the amount of data you require is more than can reasonably be gathered through the API.</p>
<p>In that instance, other strategies used are, in rough order of performance:</p>
<ol style="list-style-type: decimal">
<li>Export the raw data dump from Adobe Analytics into a database, then use R connectors for that.
<ul>
<li>R is also integrated into Spark, so Hadoop/SparkR integrations are used.</li>
</ul></li>
<li>Export Data Warehouse exports via secure FTP to a folder, then read the csv files into R.</li>
<li>Build robust scripts that retry timeouts from the API and batch and recombine data over a long period.</li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
