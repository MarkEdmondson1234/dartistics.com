<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Correlation</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DARTISTICS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="example1.html">Example: Trending</a>
    </li>
    <li>
      <a href="example2.html">Example: Data Explorer</a>
    </li>
    <li>
      <a href="example3.html">Example: Venn Diagram</a>
    </li>
    <li>
      <a href="example4.html">Example: GA Effect</a>
    </li>
    <li>
      <a href="example5.html">Example: Heatmap</a>
    </li>
    <li>
      <a href="example6.html">Example: Forecasting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    The Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="whatisr.html">What Is R?</a>
    </li>
    <li>
      <a href="gettingstarted.html">Getting Started</a>
    </li>
    <li>
      <a href="packages.html">Packages</a>
    </li>
    <li>
      <a href="basics-base_r.html">Basics of Base R</a>
    </li>
    <li>
      <a href="exercise1-thebasics.html">Exercise: The Basic Basics</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    I/O
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">WORKING WITH FILES</li>
    <li>
      <a href="import-csv-excel.html">CSV import</a>
    </li>
    <li>
      <a href="excel.html">Microsoft Excel(!)</a>
    </li>
    <li>
      <a href="exercise2-io.html">Exercise: I/O</a>
    </li>
    <li class="dropdown-header">WORKING WITH APIs</li>
    <li>
      <a href="api-google-analytics.html">Google Analytics</a>
    </li>
    <li>
      <a href="api-adobe-analytics.html">Adobe Analytics</a>
    </li>
    <li>
      <a href="api-other.html">Other APIs</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data Structures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R CLASSES AND SYNTAX</li>
    <li>
      <a href="classes.html">R Classes</a>
    </li>
    <li>
      <a href="accessing.html">Accessing elements</a>
    </li>
    <li>
      <a href="exercise3-accessing-data.html">Exercise: Accessing Data</a>
    </li>
    <li class="dropdown-header">BASE R vs. TIDY</li>
    <li>
      <a href="tidyverse.html">Tidy data / Tidyverse</a>
    </li>
    <li>
      <a href="dplyr.html">dplyr()</a>
    </li>
    <li>
      <a href="exercise4-tidy-dplyr.html">Exercise: Tidy Data / dplyr</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modelling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="modelling-intro.html">Introduction</a>
    </li>
    <li>
      <a href="nature-of-data.html">Nature of Data</a>
    </li>
    <li>
      <a href="correlation.html">Correlation</a>
    </li>
    <li>
      <a href="regression.html">Regression</a>
    </li>
    <li>
      <a href="timeseries.html">Time-series</a>
    </li>
    <li>
      <a href="categorisation.html">Categorisation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Output
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="viz-options.html">Visualisation Options</a>
    </li>
    <li>
      <a href="base-plots.html">Base Plots</a>
    </li>
    <li>
      <a href="ggplot2.html">ggplot2()</a>
    </li>
    <li>
      <a href="htmlwidgets.html">htmlwidgets()</a>
    </li>
    <li>
      <a href="rmarkdown-shiny.html">RMarkdown + Shiny</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="resources.html">Useful Links</a>
    </li>
    <li>
      <a href="key-topics.html">Key topics</a>
    </li>
    <li>
      <a href="github.html">GitHub</a>
    </li>
    <li>
      <a href="habits.html">Good Habits</a>
    </li>
    <li>
      <a href="going-further.html">Going Further</a>
    </li>
    <li>
      <a href="r-and-statistics-class.html">3-Day Training</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-N4DF7T"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N4DF7T');</script>
<!-- End Google Tag Manager -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Correlation</h1>

</div>


<p>Correlation is a number that describes how strong of a relationship there is between two variables.</p>
<p>In digital analytics terms, you can use it to explore relationships between web metrics to see if an influence can be inferred, but <em>be careful to not hastily jump to conclusions that do not account for other factors</em>.</p>
<p>For instance, a high correlation between social shares and SEO position could mean:</p>
<ul>
<li>Social shares influence SEO position</li>
<li>SEO position influences social shares</li>
<li>Social shares and SEO position are influenced by a third factor (such as Brand strength)</li>
<li>The relationship was a chance error</li>
</ul>
<p>It is, unfortunately, pretty common to see something like the first bullet used as the sole interpretation of a correlation, which is problematic for two reasons:</p>
<ul>
<li>There might be other factors in play (the other bullets in the list!)</li>
<li>Correlation is not <em>necessarily</em> a sign of causation.</li>
</ul>
<p>But, still, correlation can be very useful: identifying that a relationship exists can be a great place to start looking for the underlying drivers of that relationship which, ultimately, can lead to an insight than can drive an action!</p>
<div id="performing-correlation-analysis-in-r" class="section level2">
<h2>Performing correlation analysis in R</h2>
<p>The base function <code>cor()</code> will perform correlations on a <code>data.frame</code>. Let’s give this a go with some data.</p>
<div style="background-color: #cce6ff; font-style: italic; padding: 10px 10px 10px 10px;">
<p>This exercise requires having a <code>web_data</code> data frame. You can either load up some sample data by completing the <a href="exercise2-io.html">I/O Exercise</a> (which is what is shown in the step-by-step instructions below), or, if you have access to a Google Analytics account, you can use your own data by following the steps on the <a href="api-google-analytics.html">Google Analytics API page</a>. <em>Or</em>, if you have access to an Adobe Analytics account, then you can use your own data by following the <strong>Generating web_data</strong> steps on the <a href="api-adobe-analytics.html#generating_web_data">Adobe Analytics API page</a>.</p>
Once you have a <code>web_data</code> data frame to work with, the command <code>head(web_data)</code> should return a table that, at least structurally, looks something like this:
</div>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="left">channelGrouping</th>
<th align="left">deviceCategory</th>
<th align="right">sessions</th>
<th align="right">pageviews</th>
<th align="right">entrances</th>
<th align="right">bounces</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2016-01-01</td>
<td align="left">(Other)</td>
<td align="left">desktop</td>
<td align="right">19</td>
<td align="right">23</td>
<td align="right">19</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">2016-01-01</td>
<td align="left">(Other)</td>
<td align="left">mobile</td>
<td align="right">112</td>
<td align="right">162</td>
<td align="right">112</td>
<td align="right">82</td>
</tr>
<tr class="odd">
<td align="left">2016-01-01</td>
<td align="left">(Other)</td>
<td align="left">tablet</td>
<td align="right">24</td>
<td align="right">41</td>
<td align="right">24</td>
<td align="right">19</td>
</tr>
</tbody>
</table>
</div>
<div id="lets-correlate" class="section level2">
<h2>Let’s correlate!</h2>
<p>Correlations will only work with numeric data, so we subset to just those columns and then run the base R function <code>cor()</code> to see a correlation table:</p>
<pre class="r"><code>web_data_metrics &lt;- web_data[,c(&quot;sessions&quot;,&quot;pageviews&quot;,&quot;entrances&quot;,&quot;bounces&quot;)]
## see correlation between all metrics
kable(cor(web_data_metrics))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">sessions</th>
<th align="right">pageviews</th>
<th align="right">entrances</th>
<th align="right">bounces</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>sessions</td>
<td align="right">1.0000000</td>
<td align="right">0.8384321</td>
<td align="right">0.9999923</td>
<td align="right">0.9411201</td>
</tr>
<tr class="even">
<td>pageviews</td>
<td align="right">0.8384321</td>
<td align="right">1.0000000</td>
<td align="right">0.8377078</td>
<td align="right">0.6364753</td>
</tr>
<tr class="odd">
<td>entrances</td>
<td align="right">0.9999923</td>
<td align="right">0.8377078</td>
<td align="right">1.0000000</td>
<td align="right">0.9416535</td>
</tr>
<tr class="even">
<td>bounces</td>
<td align="right">0.9411201</td>
<td align="right">0.6364753</td>
<td align="right">0.9416535</td>
<td align="right">1.0000000</td>
</tr>
</tbody>
</table>
<p>The table is mirrored in the diagonal and provides the <em>correlation coefficient</em> (aka, “<em>r</em>”) between each pair of values that intersect in the cell. 1 means a perfect correlation, 0 means no correlation and -1 means a perfect negative correlation.</p>
<p><em>Does the R that we’re working on learning today have anything to do with the correlation coefficient <em>r</em>? Well…no. Or, at least, only to the extent that you can use R-the-platform to calculate r-the-correlation-coefficient. Good question, though!</em></p>
<p>When working with correlations, its always a good idea to view an exploratory plot. A handy function for this is <code>pairs()</code> which creates a scatter plot of all the metrics passed in combination:</p>
<pre class="r"><code>pairs(web_data_metrics)</code></pre>
<p><img src="correlation_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Here you can see the correlation numbers in graphical form. For instance, the high correlation of 0.9999923 between sessions and entrances results in an almost perfect straight line. Since a session starts with an entrance, this makes perfect sense! A correlation of less than 1 may be a quick diagnostic that something is wrong with the tracking.</p>
</div>
<div id="how-do-web-channels-correlate" class="section level2">
<h2>How do web channels correlate?</h2>
<p>One useful piece of analysis is seeing how web channels possibly interact.</p>
<div id="data-prep" class="section level3">
<h3>Data Prep</h3>
<p>To get the data in the right format, the below code pivots via the <code>reshape2</code> package:</p>
<pre class="r"><code>## Use tidyverse to pivot the data
library(dplyr)
library(tidyr)

## Get only desktop rows, and the date, channelGrouping and sessions columns
pivoted &lt;- web_data %&gt;% 
  filter(deviceCategory == &quot;desktop&quot;) %&gt;% 
  select(date, channelGrouping, sessions) %&gt;%
  spread(channelGrouping, sessions)

## Get rid of any NA&#39;s and replace with 0
pivoted[is.na(pivoted)] &lt;- 0

kable(head(pivoted))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">date</th>
<th align="right">(Other)</th>
<th align="right">Direct</th>
<th align="right">Display</th>
<th align="right">Email</th>
<th align="right">Organic Search</th>
<th align="right">Paid Search</th>
<th align="right">Referral</th>
<th align="right">Social</th>
<th align="right">Video</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2016-01-01</td>
<td align="right">19</td>
<td align="right">133</td>
<td align="right">307</td>
<td align="right">17</td>
<td align="right">431</td>
<td align="right">555</td>
<td align="right">131</td>
<td align="right">68</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">2016-01-02</td>
<td align="right">156</td>
<td align="right">1003</td>
<td align="right">196</td>
<td align="right">43</td>
<td align="right">1077</td>
<td align="right">1060</td>
<td align="right">226</td>
<td align="right">158</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">2016-01-03</td>
<td align="right">35</td>
<td align="right">1470</td>
<td align="right">235</td>
<td align="right">29</td>
<td align="right">696</td>
<td align="right">489</td>
<td align="right">179</td>
<td align="right">66</td>
<td align="right">90</td>
</tr>
<tr class="even">
<td align="left">2016-01-04</td>
<td align="right">31</td>
<td align="right">1794</td>
<td align="right">321</td>
<td align="right">70</td>
<td align="right">1075</td>
<td align="right">558</td>
<td align="right">235</td>
<td align="right">46</td>
<td align="right">898</td>
</tr>
<tr class="odd">
<td align="left">2016-01-05</td>
<td align="right">27</td>
<td align="right">1899</td>
<td align="right">309</td>
<td align="right">74</td>
<td align="right">1004</td>
<td align="right">478</td>
<td align="right">218</td>
<td align="right">47</td>
<td align="right">461</td>
</tr>
<tr class="even">
<td align="left">2016-01-06</td>
<td align="right">21</td>
<td align="right">1972</td>
<td align="right">204</td>
<td align="right">299</td>
<td align="right">974</td>
<td align="right">494</td>
<td align="right">246</td>
<td align="right">47</td>
<td align="right">418</td>
</tr>
</tbody>
</table>
<p>Take a minute to examine what the <code>pivoted</code> data looks like? Is it tidy data? Not exactly. But, that’s good! In one since, we’ve got separate “metrics” for each day now – the channelGrouping-sessions combination.</p>
</div>
<div id="examining-the-data" class="section level3">
<h3>Examining the Data</h3>
<p>We can plot and correlate all the metrics for an overview. Because we don’t want to do <em>exactly</em> the same thing as we did earlier (where’s the fun in that?!), let’s go ahead and round the correlation coefficients to two decimal places using the <code>round()</code> function. Other than that, we’ll do exactly what we already did when we were simply correlating the metrics in our data set:</p>
<pre class="r"><code>## can&#39;t include the date as its not numeric, so remove
cor_data &lt;- pivoted[, -1]
## not including first column, so -1 subset
cor_table &lt;- round(cor(cor_data),2)
kable(cor_table)</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">(Other)</th>
<th align="right">Direct</th>
<th align="right">Display</th>
<th align="right">Email</th>
<th align="right">Organic Search</th>
<th align="right">Paid Search</th>
<th align="right">Referral</th>
<th align="right">Social</th>
<th align="right">Video</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>(Other)</td>
<td align="right">1.00</td>
<td align="right">0.13</td>
<td align="right">0.12</td>
<td align="right">0.09</td>
<td align="right">0.17</td>
<td align="right">0.03</td>
<td align="right">-0.04</td>
<td align="right">0.46</td>
<td align="right">0.37</td>
</tr>
<tr class="even">
<td>Direct</td>
<td align="right">0.13</td>
<td align="right">1.00</td>
<td align="right">0.04</td>
<td align="right">0.07</td>
<td align="right">0.22</td>
<td align="right">-0.02</td>
<td align="right">0.09</td>
<td align="right">-0.05</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td>Display</td>
<td align="right">0.12</td>
<td align="right">0.04</td>
<td align="right">1.00</td>
<td align="right">0.01</td>
<td align="right">-0.05</td>
<td align="right">0.05</td>
<td align="right">-0.10</td>
<td align="right">0.19</td>
<td align="right">0.27</td>
</tr>
<tr class="even">
<td>Email</td>
<td align="right">0.09</td>
<td align="right">0.07</td>
<td align="right">0.01</td>
<td align="right">1.00</td>
<td align="right">0.26</td>
<td align="right">0.03</td>
<td align="right">0.13</td>
<td align="right">0.03</td>
<td align="right">0.13</td>
</tr>
<tr class="odd">
<td>Organic Search</td>
<td align="right">0.17</td>
<td align="right">0.22</td>
<td align="right">-0.05</td>
<td align="right">0.26</td>
<td align="right">1.00</td>
<td align="right">0.51</td>
<td align="right">0.19</td>
<td align="right">-0.04</td>
<td align="right">0.08</td>
</tr>
<tr class="even">
<td>Paid Search</td>
<td align="right">0.03</td>
<td align="right">-0.02</td>
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.51</td>
<td align="right">1.00</td>
<td align="right">0.08</td>
<td align="right">-0.01</td>
<td align="right">0.22</td>
</tr>
<tr class="odd">
<td>Referral</td>
<td align="right">-0.04</td>
<td align="right">0.09</td>
<td align="right">-0.10</td>
<td align="right">0.13</td>
<td align="right">0.19</td>
<td align="right">0.08</td>
<td align="right">1.00</td>
<td align="right">-0.11</td>
<td align="right">-0.25</td>
</tr>
<tr class="even">
<td>Social</td>
<td align="right">0.46</td>
<td align="right">-0.05</td>
<td align="right">0.19</td>
<td align="right">0.03</td>
<td align="right">-0.04</td>
<td align="right">-0.01</td>
<td align="right">-0.11</td>
<td align="right">1.00</td>
<td align="right">0.50</td>
</tr>
<tr class="odd">
<td>Video</td>
<td align="right">0.37</td>
<td align="right">0.01</td>
<td align="right">0.27</td>
<td align="right">0.13</td>
<td align="right">0.08</td>
<td align="right">0.22</td>
<td align="right">-0.25</td>
<td align="right">0.50</td>
<td align="right">1.00</td>
</tr>
</tbody>
</table>
<pre class="r"><code>pairs(cor_data)</code></pre>
<p><img src="correlation_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="analysis" class="section level3">
<h3>Analysis</h3>
<p>Now, when we compare channels, we see much looser correlations for this dataset, which makes sense, right? Correlations under 0.3 are, as a rule-of-thumb, not worth considering, so the standouts look to be <strong>Social</strong> vs. <strong>Video* and </strong>Paid** vs. <strong>Organic Search</strong>.</p>
<p>Plotting those channels, we can examine the trends to see the shape of the data</p>
<blockquote>
<p>Correlation has help us zero in on possibly interesting relationships</p>
</blockquote>
<pre class="r"><code>library(ggplot2)
gg &lt;- ggplot(data = pivoted) + 
      theme_minimal() + 
      ggtitle(&quot;Paid (blue) vs Organic (green) search&quot;)
gg &lt;- gg + 
      geom_line(aes(x = as.Date(date), y = `Paid Search`), col = &quot;blue&quot;)

gg + geom_line(aes(x = as.Date(date), y = `Organic Search`), col = &quot;green&quot;)</code></pre>
<p><img src="correlation_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>We can see here the trends do look similar, but with a paid search peak in the first quarter (as we look at this, we might want to consider these spikes as outliers – either simply by the visual or using a more defined method for detecting outliers; it would be quite simple to remove this data from the data set and run the analysis again…but we’re not going to go down that particular rabbit hole right now).</p>
<pre class="r"><code>library(ggplot2)
gg &lt;- ggplot(data = pivoted) + 
              theme_minimal() + 
              ggtitle(&quot;Social (red) vs Video (orange)&quot;)
gg &lt;- gg + 
      geom_line(aes(x = as.Date(date), y = Social), col = &quot;red&quot;)
gg + geom_line(aes(x = as.Date(date), y = Video), col = &quot;orange&quot;)</code></pre>
<p><img src="correlation_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Here, a peak in <strong>Social</strong> late in the year looks to have coincided with a peak in <em>Video</em>: possibly a campaign driving video views?</p>
</div>
</div>
<div id="cross-correlation" class="section level2">
<h2>Cross correlation</h2>
<p>The correlations, above all, compare the same date point, but what if you expect a lagged effect? Perhaps the video traffic drove social traffic later on due to client advocacy?</p>
<p>Cross correlations are useful when dealing with time-series data and can examine if a metric has an influence on itself or another after some time has passed.</p>
<p>This can be a powerful way to find if, say, a TV or Display campaign increased SEO traffic over the course of the few weeks following the campaign.</p>
<p>The below compares paid search on SEO using the <code>ccf()</code> function. The result is the correlation for different lags of days. We can see a correlation at 0 lag at around 0.5, but the correlation increases if you lag the Social trend up to 10 days before.</p>
<pre class="r"><code>ccf(pivoted$Social, pivoted$Video)</code></pre>
<p><img src="correlation_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>You could then conclude that Video was having a lagged effect on Social traffic up to 10 days beforehand. But, beware! The nature of cross-correlation is that if both datasets have a similar looking spike, cross-correlation will highlight it. Careful examination of the raw data trends should be performed to verify it. In some cases a smoother line will help get rid of spikes that affect the data (e.g., do the analysis on weekly or monthly data instead of daily). And, of course, there is no substitue for rational thought: if you find a relationship like this, can you explain it rationally? And, if so, can you conduct further analysis to validate that rationalization? <em>(If only R had an <strong>Easy Button</strong> to do the actual thinking, too. Alas!)</em></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
